---- user creation master1 [laptop1]

docker exec -it mysql-master1 /bin/bash
mysql -u root -p
CREATE USER 'replicator'@'%' IDENTIFIED BY 'repl_password_123';
GRANT REPLICATION SLAVE ON *.* TO 'replicator'@'%';
ALTER USER 'replicator'@'%' IDENTIFIED WITH mysql_native_password BY 'repl_password_123';
FLUSH PRIVILEGES;
SHOW MASTER STATUS;

---- user creation master2 [laptop2]

docker exec -it mysql-master2 /bin/bash
mysql -u root -p
CREATE USER 'replicator'@'%' IDENTIFIED BY 'repl_password_123';
GRANT REPLICATION SLAVE ON *.* TO 'replicator'@'%';
ALTER USER 'replicator'@'%' IDENTIFIED WITH mysql_native_password BY 'repl_password_123';
FLUSH PRIVILEGES;
SHOW MASTER STATUS;

---- set replica master1 from master2

docker exec -it mysql-master1 /bin/bash
mysql -u root -p
CHANGE REPLICATION SOURCE TO 
  SOURCE_HOST = '100.87.129.54',
  SOURCE_USER = 'replicator',
  SOURCE_PASSWORD = 'repl_password_123',
  SOURCE_AUTO_POSITION = 1;
START REPLICA;
SHOW REPLICA STATUS\G

---- set replica master2 from master 1

docker exec -it mysql-master2 /bin/bash
mysql -u root -p


---- set slave replica from master 2

docker exec -it mysql-slave /bin/bash
mysql -u root -p
CHANGE REPLICATION SOURCE TO 
  SOURCE_HOST = '100.87.129.54',
  SOURCE_USER = 'replicator',
  SOURCE_PASSWORD = 'repl_password_123',
  SOURCE_AUTO_POSITION = 1;
START REPLICA;
SHOW REPLICA STATUS\G


---- user creation on all nodes for proxysql use the container name not only master1

    --- monitor user
    docker exec -it mysql-master1 /bin/bash
    mysql -u root -p
    CREATE USER 'proxysql_monitor'@'%' IDENTIFIED BY 'monitor_pass';
    GRANT REPLICATION CLIENT, SUPER ON *.* TO 'proxysql_monitor'@'%';
    FLUSH PRIVILEGES;

    --- application user
    docker exec -it mysql-master1 /bin/bash
    mysql -u root -p
    CREATE USER 'app_user'@'%' IDENTIFIED BY 'app_password';
    GRANT ALL PRIVILEGES ON mydata.* TO 'app_user'@'%';
    FLUSH PRIVILEGES;